var Xe=Object.defineProperty;var Ze=(t,n,e)=>n in t?Xe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var E=(t,n,e)=>(Ze(t,typeof n!="symbol"?n+"":n,e),e),ce=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var O=(t,n,e)=>(ce(t,n,"read from private field"),e?e.call(t):n.get(t)),S=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},B=(t,n,e,r)=>(ce(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);var j=(t,n,e)=>(ce(t,n,"access private method"),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={},F={},V={};Object.defineProperty(V,"__esModule",{value:!0});V.setAttributes=void 0;function Qe(t,n){for(const e of Object.keys(t))e in n&&(n[e]=t[e])}function Ve(t,n){for(const e of Object.keys(n)){if(e==="__source"||e==="__self")continue;const r=n[e];if(e.startsWith("on")){const i=e.replace(/Capture$/,""),s=e!==i,h=i.toLowerCase().substring(2);t.addEventListener(h,r,s)}else e==="style"&&typeof r!="string"?Qe(r,t.style):e==="dangerouslySetInnerHTML"?t.innerHTML=r:r===!0?t.setAttribute(e,e):(r||r===0)&&t.setAttribute(e,r.toString())}}V.setAttributes=Ve;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.createDomElement=U.applyChildren=void 0;function et(t,n){n instanceof Element?t.appendChild(n):typeof n=="string"||typeof n=="number"?t.appendChild(document.createTextNode(n.toString())):console.warn("Unknown type to append: ",n)}function je(t,n){for(const e of n)!e&&e!==0||(Array.isArray(e)?je(t,e):et(t,e))}U.applyChildren=je;function tt(t,n){const e=n!=null&&n.is?{is:n.is}:void 0;return n!=null&&n.xmlns?document.createElementNS(n.xmlns,t,e):document.createElement(t,e)}U.createDomElement=tt;Object.defineProperty(F,"__esModule",{value:!0});F.h=F.createElement=void 0;const nt=V,Ae=U;function Ee(t,n,...e){if(typeof t=="function")return t({...n,children:e});const r=(0,Ae.createDomElement)(t,n);return n&&(0,nt.setAttributes)(r,n),(0,Ae.applyChildren)(r,e),r}F.createElement=Ee;F.h=Ee;var T={};Object.defineProperty(T,"__esModule",{value:!0});T.jsxDEV=Me=T.jsxs=ne=T.jsx=void 0;const rt=V,xe=U;function we(t,n){if(typeof t=="function")return t(n);const{children:e,...r}=n,i=(0,xe.createDomElement)(t,r);return r&&(0,rt.setAttributes)(i,r),(0,xe.applyChildren)(i,[e]),i}var ne=T.jsx=we,Me=T.jsxs=we;T.jsxDEV=we;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});(function(t){var n=te&&te.__createBinding||(Object.create?function(r,i,s,h){h===void 0&&(h=s);var f=Object.getOwnPropertyDescriptor(i,s);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,h,f)}:function(r,i,s,h){h===void 0&&(h=s),r[h]=i[s]}),e=te&&te.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&n(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),e(F,t),e(T,t),e(Be,t)})(Je);var it={j:function(n){try{return JSON.stringify(n)}catch(e){return"[UnexpectedJSONParseError]: ".concat(e.message)}},l:function(n){return n.toString()}};function g(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];if(!t){var i=[],s=0,h=n.replace(/%([a-zA-Z%])/g,function(f,o){if(f==="%%")return f;var a=it[o];if(typeof a=="function"){var d=e[s++];return i.push(d),a(d)}return f});throw console&&i.length>0&&console.log.apply(console,i),new Error("[serializr] "+(h||"Illegal State"))}}function De(t){if(t)throw new Error(t)}function ot(t){var n=!1;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!n)return n=!0,t.apply(void 0,e);g(!1,"callback was invoked twice")}}function Te(t,n,e){if(t.length===0)return void e(null,[]);var r=t.filter(function(h){return!0}).length,i=[],s=!1;t.forEach(function(h,f){n(h,function(o,a){o?s||(s=!0,e(o)):(i[f]=a,--r===0&&e(null,i))},f)})}function re(t){return t===null?!0:typeof t!="object"&&typeof t!="function"}function W(t){return t&&t.factory&&t.props}function Pe(t){return t&&t.serializer&&t.deserializer}function st(t){return typeof t=="object"&&typeof t.jsonname=="string"}function lt(t){return typeof t=="object"&&t.identifier===!0}function Ce(t,n){for(var e=t;e;){if(e===n)return!0;e=e.extends}return!1}function at(t){g(W(t),"modelSchema must be a ModelSchema");for(var n=t;n;){for(var e in n.props)if(lt(n.props[e]))return e;n=n.extends}}function ee(t,n){return n&&(g(Pe(t),"expected a propSchema"),Object.assign(t,n)),t}function I(t){if(t){if(W(t))return t;if(W(t.serializeInfo))return t.serializeInfo;if(t.constructor&&t.constructor.serializeInfo)return t.constructor.serializeInfo}}function ft(t,n){return g(W(n),"expected modelSchema, got ".concat(n)),t.serializeInfo=n,n}function We(t,n,e){g(t!==Object,"one cannot simply put define a model schema for Object"),g(typeof t=="function","expected constructor function");var r={targetClass:t,factory:e||function(){return new t},props:n};if(t.prototype.constructor!==Object){var i=I(t.prototype.constructor);i&&i.targetClass!==t&&(r.extends=i)}return ft(t,r),r}function k(t){var n={serializer:function(e){return g(re(e),"this value is not primitive: ".concat(e)),e},deserializer:function(e,r){return re(e)?void r(null,e):void r("[serializr] this value is not primitive: ".concat(e))}};return n=ee(n,t),n}var N=typeof Symbol<"u"?Symbol("SKIP"):{SKIP:!0},q=k();function ie(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];g(t.length===1||t.length===2,"serialize expects one or 2 arguments");var e,r;return t.length===1?(e=void 0,r=t[0]):(e=t[0],r=t[1]),Array.isArray(r)?r.map(function(i){return e?ie(e,i):ie(i)}):(e?typeof e!="object"&&(e=I(e)):e=I(r),e||g(e,"Failed to find default schema for ".concat(r)),Le(e,r))}function Le(t,n){var e;g(t&&typeof t=="object"&&t.props,"Expected schema"),g(n&&typeof n=="object","Expected object");var r;return t.extends?r=Le(t.extends,n):r={},Object.keys(t.props).forEach(function(i){var s=t.props[i];if(s){if(i==="*"){ct(t,s,n,r);return}s===!0&&(s=q);var h=s.serializer(n[i],i,n);h!==N&&(r[s.jsonname||i]=h)}}),!((e=t.discriminator)===null||e===void 0)&&e.storeDiscriminator&&t.discriminator.storeDiscriminator(r),r}function ct(t,n,e,r){for(var i=0,s=Object.keys(e);i<s.length;i++){var h=s[i];if(!(h in t.props)&&(n===!0||n&&(!n.pattern||n.pattern.test(h)))){var f=e[h];if(n===!0)re(f)&&(r[h]=f);else{var o=n.serializer(f,h,e);if(o===N)return;r[h]=o}}}}var ut=function(){function t(n,e,r,i,s){this.parentContext=n,this.modelSchema=e,this.json=r,this.onReadyCb=i,this.isRoot=!n,this.pendingCallbacks=0,this.pendingRefsCount=0,this.target=void 0,this.hasError=!1,n?(this.rootContext=n.rootContext,this.args=n.args):(this.rootContext=this,this.args=s,this.pendingRefs={},this.resolvedRefs={})}return t.prototype.createCallback=function(n){var e=this;return this.pendingCallbacks++,ot(function(r,i){r?e.hasError||(e.hasError=!0,e.onReadyCb(r),t.rootContextCache.delete(e)):e.hasError||(n(i),--e.pendingCallbacks===e.pendingRefsCount&&(e.pendingRefsCount>0?(e.onReadyCb(new Error('Unresolvable references in json: "'.concat(Object.keys(e.pendingRefs).filter(function(s){return e.pendingRefs[s].length>0}).join('", "'),'"'))),t.rootContextCache.delete(e)):(e.onReadyCb(null,e.target),t.rootContextCache.delete(e))))})},t.prototype.await=function(n,e,r){if(g(this.isRoot,"await can only be called on the root context"),e in this.resolvedRefs){var i=this.resolvedRefs[e].filter(function(s){return Ce(s.modelSchema,n)})[0];if(i)return void r(null,i.value)}this.pendingRefsCount++,this.pendingRefs[e]||(this.pendingRefs[e]=[]),this.pendingRefs[e].push({modelSchema:n,uuid:e,callback:r})},t.prototype.resolve=function(n,e,r){if(g(this.isRoot,"resolve can only called on the root context"),this.resolvedRefs[e]||(this.resolvedRefs[e]=[]),this.resolvedRefs[e].push({modelSchema:n,value:r}),e in this.pendingRefs)for(var i=this.pendingRefs[e].length-1;i>=0;i--){var s=this.pendingRefs[e][i];Ce(n,s.modelSchema)&&(this.pendingRefs[e].splice(i,1),this.pendingRefsCount--,s.callback(null,r))}},t.prototype.setTarget=function(n){this.isRoot&&this.target&&t.rootContextCache.delete(this.target),this.target=n,t.rootContextCache.set(this.target,this)},t.prototype.cancelAwaits=function(){var n=this;g(this.isRoot,"cancelAwaits can only be called on the root context"),Object.keys(this.pendingRefs).forEach(function(e){n.pendingRefs[e].forEach(function(r){n.pendingRefsCount--,r.callback(new Error("Reference resolution canceled for "+e))})}),this.pendingRefs={},this.pendingRefsCount=0},t.getTargetContext=function(n){return t.rootContextCache.get(n)},t.rootContextCache=new WeakMap,t}();function dt(t,n){for(var e in t.props){var r=t.props[e];if(typeof r=="object"&&r.jsonname===n)return!0}return!1}function ht(t,n,e,r,i){var s=function(f){if(!(f in n.props)&&!dt(n,f)){var o=i[f];e===!0?(g(re(o),"encountered non primitive value while deserializing '*' properties in property '".concat(f,"': ").concat(o)),r[f]=o):e&&(!e.pattern||e.pattern.test(f))&&e.deserializer(o,t.rootContext.createCallback(function(a){return a!==N&&(r[f]=a)}),t)}};for(var h in i)s(h)}function pt(t,n){var e;if(!((e=n.subSchemas)===null||e===void 0)&&e.length)for(var r=0,i=n.subSchemas;r<i.length;r++){var s=i[r];if(s.discriminator&&s.discriminator.isActualType(t))return s}return n}function vt(t,n,e,r){e===void 0&&(e=De),g(arguments.length>=2,"deserialize expects at least 2 arguments");var i=I(t);if(g(W(i),"first argument should be model schema"),Array.isArray(n)){var s=[];return Te(n,function(h,f){var o=ue(void 0,i,h,f,r);s.push(o)},e),s}else return ue(void 0,i,n,e,r)}function ue(t,n,e,r,i){if(e==null||typeof e!="object")return void r(null,null);var s=pt(e,n),h=new ut(t,s,e,r,i),f=s.factory(h);g(!!f,"No object returned from factory"),h.setTarget(f);var o=h.createCallback(De);return Ie(h,s,e,f),o(),f}var ke=function(t,n,e,r,i,s){s&&typeof s.beforeDeserialize=="function"?s.beforeDeserialize(t,n,e,r,i,s):t(null,n)},Ue=function(t,n,e,r,i,s,h,f){f&&typeof f.afterDeserialize=="function"?f.afterDeserialize(t,n,e,r,i,s,h,f):t(n,e)};function Ie(t,n,e,r){var i;n.extends&&Ie(t,n.extends,e,r);function s(c,l,y){var R=t.rootContext.createCallback(function(A){return A!==N&&(r[y]=A)});c.deserializer(l,function(A,z){return Ue(R,A,z,l,e,y,t,c)},t,r[y])}for(var h=function(c){var l=n.props[c];if(!l)return{value:void 0};if(c==="*")return ht(t,n,l,r,e),{value:void 0};l===!0&&(l=q);var y=(i=l.jsonname)!==null&&i!==void 0?i:c;g(typeof y!="symbol","You must alias symbol properties. prop = %l",c);var R=e[y],A=l,z=function(w,x){!w&&x!==void 0&&s(A,x,c)};ke(z,R,e,y,t,l)},f=0,o=Object.keys(n.props);f<o.length;f++){var a=o[f],d=h(a);if(typeof d=="object")return d.value}}function $e(t,n){g(typeof t=="object"||typeof t=="function","No modelschema provided. If you are importing it from another file be aware of circular dependencies.");var e={serializer:function(r){return t=I(t),g(W(t),"expected modelSchema, got ".concat(t)),r==null?r:ie(t,r)},deserializer:function(r,i,s){return t=I(t),g(W(t),"expected modelSchema, got ".concat(t)),r==null?void i(null,r):void ue(s,t,r,i,void 0)}};return e=ee(e,n),e}var yt=function(t,n,e){e.rootContext.resolve(e.modelSchema,t,e.target)};function Fe(t,n){var e,r;typeof t=="function"?(e=t,r=n):r=t,g(!r||typeof r=="object","Additional property arguments should be an object, register function should be omitted or a funtion");var i={identifier:!0,serializer:q.serializer,deserializer:function(s,h,f){q.deserializer(s,function(o,a){yt(a,f.target,f),e&&e(a,f.target,f),h(o,a)},f)}};return i=ee(i,r),i}function gt(t){return function(e,r,i){i.rootContext.await(t,e,r)}}function de(t,n,e){g(!!t,"No modelSchema provided. If you are importing it from another file be aware of circular dependencies.");var r=typeof n=="function"?n:void 0;e=e||(r?void 0:n);var i=!1,s;function h(){if(i=!0,g(typeof t!="string"||typeof r=="function","if the reference target is specified by attribute name, a lookup function is required"),g(!r||typeof r=="function","second argument should be a lookup function or additional arguments object"),typeof t=="string")s=t;else{var o=I(t);g(W(o),"expected model schema or string as first argument for 'ref', got ".concat(o)),r=r||gt(o),s=at(o),g(!!s,"provided model schema doesn't define an identifier() property and cannot be used by 'ref'.")}}var f={serializer:function(o){return i||h(),o?o[s]:null},deserializer:function(o,a,d){i||h(),o==null?a(null,o):r(o,a,d)}};return f=ee(f,e),f}function Re(t,n){t=t||q,g(Pe(t),"expected prop schema as first argument"),g(!st(t),"provided prop is aliased, please put aliases first");var e={serializer:function(r){return r===void 0?N:r===null?null:(g(r&&"length"in r&&"map"in r,"expected array (like) object"),r.map(t.serializer))},deserializer:function(r,i,s){if(r===null)return void i(null,r);if(!Array.isArray(r))return void i("[serializr] expected JSON array");function h(f,o,a){function d(l,y){l?o(l):t.deserializer(y,c,s)}function c(l,y){typeof t.afterDeserialize=="function"?Ue(o,l,y,f,r,a,s,t):o(l,y)}ke(d,f,r,a,s,t)}Te(r,h,function(f,o){if(f)return void i(f);i(void 0,o.filter(function(a){return N!==a}))})}};return e=ee(e,n),e}const bt=(t,n)=>{let e=[-1];return t.some(function r(i){return function(s,h){return s===n?(e=i.concat(h),!0):Array.isArray(s)&&s.some(r(i.concat(h)))}}([])),e},Oe={},Ne=t=>{const n=(Oe[t.name]??0)+1;return Oe[t.name]=n,n},wt=t=>document.querySelector(t),mt=(t,n,e,r={})=>{const i=new AbortController;return t.addEventListener(n,e,{passive:!0,signal:i.signal,...r}),()=>{i.abort()}},At="O",xt="X",_=t=>t;_.x=_(xt);_.o=_(At);_.empty=_(null);Object.freeze(_);const _e=(t,n,e,r)=>{const i=Math.min(t,n),h=2*(1+Math.abs(n-t)),f=e<h/2,o=f?0:-h/2,a=e+o,d=f?0:i-1,c=t>n?[d,a]:[d+a,0],l=f?[1,1]:[-1,1];return[c[0]+r*l[0],c[1]+r*l[1]]};var M,D,se,Ye,G,he,le,qe,K,pe,ae,Ge,H,ve,X,ye,Z,ge;const fe=class{constructor(n,e,r){S(this,se);S(this,G);S(this,le);S(this,K);S(this,ae);S(this,H);S(this,X);S(this,Z);E(this,"id",Ne(fe));E(this,"board");E(this,"level");E(this,"parent");E(this,"children");S(this,M,void 0);S(this,D,void 0);n!==void 0&&(this.level=n),B(this,M,_.empty),e!==void 0&&(this.parent=e),B(this,D,!1),r!==void 0&&(this.board=r),this.children=j(this,se,Ye).call(this)}get width(){return this.board.width}get height(){return this.board.height}get __wonBy(){return this.isWonBy}set __wonBy(n){B(this,M,n)}get __filled(){return this.canFill}set __filled(n){B(this,D,n)}get isWonBy(){return O(this,M)!==null||this.level===0||O(this,D)?O(this,M):j(this,G,he).call(this,_.empty)}get isActive(){return this.board.activeState===this}get canDoMove(){return O(this,M)!==null||O(this,D)?!1:j(this,H,ve).call(this)}get canFill(){return O(this,M)===null&&!O(this,D)?O(this,X,ye):!1}fill(){const n=this.board.turn;n!==null&&this.canFill&&this.hasActiveAncestor&&(j(this,Z,ge).call(this,n),this.board.nextTurn())}get hasActiveAncestor(){return this.parent===null?this.isActive:this.isActive||this.parent.hasActiveAncestor}};let P=fe;M=new WeakMap,D=new WeakMap,se=new WeakSet,Ye=function(){return this.level>0?Array.from(Array(this.height)).map(n=>Array.from(Array(this.width)).map(e=>new fe(this.level-1,this,this.board))):null},G=new WeakSet,he=function(n){const e=O(this,M);if(e===null){const r=this.level===0?n:j(this,ae,Ge).call(this);return r!==null&&(B(this,M,r),j(this,le,qe).call(this)),r}return e},le=new WeakSet,qe=function(){var n;if(this.parent!==null){const[e,r]=bt(this.parent.children,this);if(this.parent.parent!==null){const i=this.parent.parent.children[e][r];this.board.activeState=i,j(n=i,K,pe).call(n)}}},K=new WeakSet,pe=function(){var n;this.canDoMove||(this.board.activeState=null,this.parent!==null&&(this.board.activeState=this.parent,j(n=this.parent,K,pe).call(n)))},ae=new WeakSet,Ge=function(){if(this.children!==null){const n=Array(this.height).fill(!0),e=Array(this.width).fill(!0),r=Math.min(this.height,this.width),i=Math.abs(this.height-this.width),s=2*(1+i),h=Array(s).fill(!0),f=(o,a)=>{n[o]=!1,e[a]=!1;const d=this.height>this.width?o-a:a-o;d>=0&&d<=i&&(h[d]=!1);const l=o+a-r+1;l>=0&&l<=i&&(h[l+s/2]=!1)};for(let o=0;o<n.length;o++){if(!n[o])continue;const d=this.width,c=this.children[o][0].isWonBy;if(c===null)f(o,0);else for(let l=1;l<d;l++){const y=this.children[o][l].isWonBy;if(y===null){f(o,l);break}if(y!==c)break;if(l===d-1)return c}}for(let o=0;o<e.length;o++){if(!e[o])continue;const d=this.height,c=this.children[0][o].isWonBy;if(c===null)f(0,o);else for(let l=1;l<d;l++){const y=this.children[l][o].isWonBy;if(y===null){f(l,o);break}if(y!==c)break;if(l===d-1)return c}}for(let o=0;o<h.length;o++){if(!h[o])continue;const d=r,[c,l]=_e(this.width,this.height,o,0),y=this.children[c][l].isWonBy;if(y===null)f(c,l);else for(let R=1;R<d;R++){const[A,z]=_e(this.width,this.height,o,R),w=this.children[A][z].isWonBy;if(w===null){f(A,z);break}if(w!==y)break;if(R===d-1)return y}}}return O(this,M)},H=new WeakSet,ve=function(){var e;const n=((e=this.children)==null?void 0:e.some(r=>r.some(i=>i.canDoMove)))??O(this,M)===null;return n||B(this,D,!0),n},X=new WeakSet,ye=function(){return this.parent===null||this.parent===void 0?!O(this,D):this.parent.canDoMove&&O(this.parent,X,ye)},Z=new WeakSet,ge=function(n){var e;j(this,G,he).call(this,n),j(this,H,ve).call(this),this.parent!==null&&j(e=this.parent,Z,ge).call(e,n)};var J;const me=class{constructor(n,e,r){E(this,"id",Ne(me));E(this,"width");E(this,"height");E(this,"maxLevel");E(this,"rootState");E(this,"activeState");E(this,"turn",_.empty);S(this,J,null);n!==void 0&&(this.width=n),e!==void 0&&(this.height=e),r!==void 0&&(this.maxLevel=r,this.rootState=new P(r,null,this),this.activeState=this.rootState)}setRenderCallback(n){B(this,J,n)}startTurn(n){this.turn=n}nextTurn(){var n;this.turn!==_.empty&&(this.turn=this.turn===_.o?_.x:_.o,(n=O(this,J))==null||n.call(this))}};let Y=me;J=new WeakMap;var $;class Ct{constructor(n){S(this,$,void 0);B(this,$,n)}getRenderObject(){return O(this,$)}setRenderObject(n){B(this,$,n)}}$=new WeakMap;var Q,be;class Rt extends Ct{constructor(){super(...arguments);S(this,Q)}render(){const e=this.getRenderObject();return j(this,Q,be).call(this,e.rootState)}}Q=new WeakSet,be=function(e){var i;const r=document.createElement("div");return r.classList.add("cell"),r.classList.add(`level${e.level}`),e.canFill||r.classList.add("filled"),e.isWonBy!==null&&(r.classList.add("won"),r.classList.add(e.isWonBy)),e.isActive&&r.classList.add("active"),e.level===0&&mt(r,"click",s=>{e.fill()}),e.level>0&&r.append(...((i=e.children)==null?void 0:i.flatMap(s=>s).map(s=>j(this,Q,be).call(this,s)))??[]),r};We(Y,{id:Fe(),width:k(),height:k(),maxLevel:k(),rootState:$e(P),activeState:de(P)});We(P,{id:Fe(),level:k(),children:Re(Re($e(P))),parent:de(P),board:de(Y),__wonBy:k(),__filled:k()});const Ot=t=>t;var oe={},_t={get exports(){return oe},set exports(t){oe=t}};(function(t){var n=function(){var e=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function h(o,a){if(!s[o]){s[o]={};for(var d=0;d<o.length;d++)s[o][o.charAt(d)]=d}return s[o][a]}var f={compressToBase64:function(o){if(o==null)return"";var a=f._compress(o,6,function(d){return r.charAt(d)});switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:f._decompress(o.length,32,function(a){return h(r,o.charAt(a))})},compressToUTF16:function(o){return o==null?"":f._compress(o,15,function(a){return e(a+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:f._decompress(o.length,16384,function(a){return o.charCodeAt(a)-32})},compressToUint8Array:function(o){for(var a=f.compress(o),d=new Uint8Array(a.length*2),c=0,l=a.length;c<l;c++){var y=a.charCodeAt(c);d[c*2]=y>>>8,d[c*2+1]=y%256}return d},decompressFromUint8Array:function(o){if(o==null)return f.decompress(o);for(var a=new Array(o.length/2),d=0,c=a.length;d<c;d++)a[d]=o[d*2]*256+o[d*2+1];var l=[];return a.forEach(function(y){l.push(e(y))}),f.decompress(l.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":f._compress(o,6,function(a){return i.charAt(a)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),f._decompress(o.length,32,function(a){return h(i,o.charAt(a))}))},compress:function(o){return f._compress(o,16,function(a){return e(a)})},_compress:function(o,a,d){if(o==null)return"";var c,l,y={},R={},A="",z="",w="",x=2,C=3,b=2,m=[],u=0,v=0,p;for(p=0;p<o.length;p+=1)if(A=o.charAt(p),Object.prototype.hasOwnProperty.call(y,A)||(y[A]=C++,R[A]=!0),z=w+A,Object.prototype.hasOwnProperty.call(y,z))w=z;else{if(Object.prototype.hasOwnProperty.call(R,w)){if(w.charCodeAt(0)<256){for(c=0;c<b;c++)u=u<<1,v==a-1?(v=0,m.push(d(u)),u=0):v++;for(l=w.charCodeAt(0),c=0;c<8;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1}else{for(l=1,c=0;c<b;c++)u=u<<1|l,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=0;for(l=w.charCodeAt(0),c=0;c<16;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1}x--,x==0&&(x=Math.pow(2,b),b++),delete R[w]}else for(l=y[w],c=0;c<b;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1;x--,x==0&&(x=Math.pow(2,b),b++),y[z]=C++,w=String(A)}if(w!==""){if(Object.prototype.hasOwnProperty.call(R,w)){if(w.charCodeAt(0)<256){for(c=0;c<b;c++)u=u<<1,v==a-1?(v=0,m.push(d(u)),u=0):v++;for(l=w.charCodeAt(0),c=0;c<8;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1}else{for(l=1,c=0;c<b;c++)u=u<<1|l,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=0;for(l=w.charCodeAt(0),c=0;c<16;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1}x--,x==0&&(x=Math.pow(2,b),b++),delete R[w]}else for(l=y[w],c=0;c<b;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1;x--,x==0&&(x=Math.pow(2,b),b++)}for(l=2,c=0;c<b;c++)u=u<<1|l&1,v==a-1?(v=0,m.push(d(u)),u=0):v++,l=l>>1;for(;;)if(u=u<<1,v==a-1){m.push(d(u));break}else v++;return m.join("")},decompress:function(o){return o==null?"":o==""?null:f._decompress(o.length,32768,function(a){return o.charCodeAt(a)})},_decompress:function(o,a,d){var c=[],l=4,y=4,R=3,A="",z=[],w,x,C,b,m,u,v,p={val:d(0),position:a,index:1};for(w=0;w<3;w+=1)c[w]=w;for(C=0,m=Math.pow(2,2),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;switch(C){case 0:for(C=0,m=Math.pow(2,8),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;v=e(C);break;case 1:for(C=0,m=Math.pow(2,16),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;v=e(C);break;case 2:return""}for(c[3]=v,x=v,z.push(v);;){if(p.index>o)return"";for(C=0,m=Math.pow(2,R),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;switch(v=C){case 0:for(C=0,m=Math.pow(2,8),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;c[y++]=e(C),v=y-1,l--;break;case 1:for(C=0,m=Math.pow(2,16),u=1;u!=m;)b=p.val&p.position,p.position>>=1,p.position==0&&(p.position=a,p.val=d(p.index++)),C|=(b>0?1:0)*u,u<<=1;c[y++]=e(C),v=y-1,l--;break;case 2:return z.join("")}if(l==0&&(l=Math.pow(2,R),R++),c[v])A=c[v];else if(v===y)A=x+x.charAt(0);else return null;z.push(A),c[y++]=x+A.charAt(0),l--,x=A,l==0&&(l=Math.pow(2,R),R++)}}};return f}();t!=null&&(t.exports=n)})(_t);const L={board:new Y(3,3,3),currentTurn:0,currentLevel:0},Ke=new Rt,He="savedData",zt=()=>{const t=localStorage.getItem(He);if(t===null)return null;const n=oe.decompressFromUTF16(t);if(n===null)return null;const e=JSON.parse(n);return vt(Y,e)},St=t=>{const n=ie(t),e=JSON.stringify(n),r=oe.compressToUTF16(e);localStorage.setItem(He,r)};L.board.startTurn(_.o);const ze=zt();ze!=null?L.board=ze:L.board.startTurn(_.o);Ke.setRenderObject(L.board);const Se="board",jt=ne("div",{id:Se,children:function t(){return L.board.setRenderCallback(()=>{var n;(n=wt(`#${Se}`))==null||n.replaceChildren(t()),St(L.board)}),Ke.render()}()}),Et=Ot(Me("div",{children:[ne("h1",{children:"TTT Infinite"}),ne("style",{children:`
        *, *:before, *:after {
          box-sizing: border-box;
        }

        #board {
          --width: ${L.board.width};
          --height: ${L.board.height};

          width: 540px;
          aspect-ratio: 1 / 1;
        }
        #board>.cell {
          width: 100%;
          height: 100%;
        }
        .cell {
          border: 1px solid transparent;
        }
        .cell:not(:empty) {
          display: grid;
          grid: repeat(var(--width), 1fr) / repeat(var(--height), 1fr);
        }
        .cell:empty {
          border-width: .5px;
        }
        .cell:empty:before {
          content: '';
          display: block;
          width: 100%;
          height: 100%;
          border-radius: 2px;

          --bg: #e0e0e0;
          background: var(--bg);
        }
        .cell.active .cell:empty {
          cursor: pointer;
        }
        .cell.active .cell:empty:before {
          --bg: #ff8;
        }
        .cell.won.O:empty:before {
          --bg: #f88;
        }
        .cell.won.X:empty:before {
          --bg: #88f;
        }
        `}),jt]})),Mt=document.querySelector("#app");Mt.append(Et);
